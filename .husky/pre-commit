#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running format check and linting..."

# Backend project
echo "ğŸ“¦ Checking backend-hexagonal..."
cd backend-hexagonal
pnpm format:check || { echo 'âŒ Backend format check failed. Run `cd backend-hexagonal && pnpm format` to fix.'; exit 1; }
pnpm lint:fix || { echo 'âŒ Backend lint check failed. Run `cd backend-hexagonal && pnpm lint:fix` to fix.'; exit 1; }
cd ..

# Frontend project
echo "ğŸ–¥ï¸ Checking frontend-react..."
cd frontend-react
pnpm format:check || { echo 'âŒ Frontend format check failed. Run `cd frontend-react && pnpm format` to fix.'; exit 1; }
pnpm lint:fix || { echo 'âŒ Frontend lint check failed. Run `cd frontend-react && pnpm lint:fix` to fix.'; exit 1; }
cd ..

echo "âœ… Pre-commit checks passed!"